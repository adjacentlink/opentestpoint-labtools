EXTRA_DIST= \
 api.rst \
 conf.py.in \
 images \
 index.rst

SPHINXOPTS    =
SPHINXBUILD   = sphinx-build
SPHINXPROJ    = labtools
SOURCEDIR     = .
BUILDDIR      = _build

all-local:

html: conf.py
	@$(SPHINXBUILD) -M html "$(SOURCEDIR)" "$(BUILDDIR)" $(SPHINXOPTS) $(O)

clean-local::
	-rm -rf "$(BUILDDIR)"
	-rm -f conf.py

edit = sed \
        -e 's|@VERSION[@]|$(VERSION)|g' 

conf.py: conf.py.in
	if test -f $@; then chmod u+w $@; fi
	$(edit) $< > $@
	chmod g-w,u-w $@
